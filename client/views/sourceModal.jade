template(name="sourceModal")
  #event-source.modal.modal-skinny.fade(role="dialog")
    .modal-dialog
      .modal-content
        .modal-header
          .modal-header--title
            h4
              if edit
                | Edit Document
              else
                | Add Document
          +modalCloseButton

        .modal-body
          form#add-source(novalidate)
            if showSuggestedDocuments
              .form-group.full-width
                label.control-label.featured Suggested Documents
                #suggested-articles.modal-block
                  if loadingArticles
                    +loading small=true static=true
                  else
                    if suggestedArticles.count
                      ul.list-unstyled
                        each suggestedArticles
                          li(class="{{#if articleSelected}} active {{/if}}")= subject
                    else
                      .no-results No documents found

            if url
              label.control-label Document URL
              p.form-control-static {{url}}
            if showContent
              .content
                p=content

            if showArticleInputs
              .form-group.full-width.with-tabs
                ul.tabs.tabs-secondary.tabs-traditional(role="tablist")
                  li(class="{{#if originIsUrl}}active{{/if}}")
                    a(href="#url" data-toggle="tab" role="tab") Via URL
                  li(class="{{#if originIsText}}active{{/if}}")
                    a(href="#text" data-toggle="tab" role="tab") Via Pasted Text
                .tab-content.modal-block
                  #url.tab-pane(class="{{#if originIsUrl}}active{{/if}}" role="tabpanel")
                    .form-group(class="{{suggested 'url'}}")
                      input#article.form-control.new-article(
                        type="url"
                        value=url
                        name="url"
                        placeholder='yourdocumenturl.com'
                        required=originIsUrl)
                      .help-block.with-errors
                  #text.tab-pane(class="{{#if originIsText}}active{{/if}}" role="tabpanel")
                    textarea.form-control.article-text#content(
                      placeholder="Paste text here"
                      name='content'
                      require=originIsText)
                    .help-block.with-errors

            .form-group.form-group--full(class="{{suggested 'title'}}")
              label.control-label Title
              input#title.form-control.new-title(
                type="text"
                name="title"
                value=title
                required)
              .help-block.with-errors

            .form-group.form-group--full(class="{{#if editing}} date-editing {{/if}}")
              label.control-label Publication Date
              .modal-block.full-width
                #publishDate.datePicker.inlineRangePicker.centered(class="{{suggested 'date'}}")
                .clearfix.time
                  .col-sm-6
                    .form-group(class="{{suggested 'time'}}")
                      .input-group
                        span.input-group-addon
                          i.fa.fa-clock-o
                        input#publishTime.timePicker.form-control(
                          type="text"
                          name="publishTime"
                          placeholder="Time"
                          required
                          data-error="Please select a time.")
                      .help-block.with-errors
                  .col-sm-6
                    .form-group(class="{{suggested 'time'}}")
                      .input-group.with-select
                        span.input-group-addon
                          i.fa.fa-globe
                        select#publishDateTZ.form-control(name="publishDateTZ")
                          each timezones
                            option(value=name selected=selected) #{name} (GMT#{offset})

            if showEnhanceOption
              .form-group.no-margin
                .container-flex.check-buttons.options.no-break
                  .check-button
                    input(
                      type="checkbox"
                      name="enhance"
                      id="enhance"
                      value="1"
                      tabindex="-1"
                      checked)
                    label(for="enhance" tabindex="0") Suggest incidents

        .modal-footer
          button.btn.btn-default(type="button" data-dismiss="modal") Close
          button.btn.btn-primary(type="button" class=saveButtonClass) Save

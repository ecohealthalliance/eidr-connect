template(name="incidentList")
  ul.incident-list.list-unstyled
    each incidents
      li.incident(class="{{#if selected}} selected {{/if}}")
        .incident--main-details.container-flex.no-break
          .container-flex.incident--select.no-break
            span.incident--selection-status
            h3.incident--title {{incidentCountAndDisease this}}
          ul.actions.container-flex.list-unstyled.no-break
            li.view(class="{{#if viewingIncident}}viewing{{/if}}")
              i.fa.fa-eye
            li.edit
              i.fa.fa-pencil
        +incidentSecondaryDetails(
          incidentEvents=incidentEvents
          locations=locations
          incidentId=_id)

template(name="incidentSecondaryDetails")
  .incident--secondary-details.container-flex.no-break(
    class="{{#if detailsOpen}}details-open{{/if}} {{#unless hasAdditionalInfo}}disabled{{/unless}}")
    i.fa.toggle-details(
      class="fa-chevron-circle-{{#if detailsOpen}}down{{else}}right{{/if}}")
    ul.container-flex.list-unstyled.no-break(
      class="{{#if detailsOpen}}details-open{{/if}}")
      if incidentEvents.length
        li.events(title="Associated Events" data-toggle="tooltip")
          i.i-event
          if detailsOpen
            ul.list-unstyled
              each incidentEvents
                li
                  span= eventName
                  i.fa.fa-times-circle.disassociate-event
          else
            span= incidentEvents.length
      li.locations
        if detailsOpen
          i.fa.fa-globe
          ul.list-unstyled
            each locations
              li {{formatLocation this}}
        else
          span= firstLocationName
      li.date
        if detailsOpen
          i.fa.fa-calendar
        span {{formatDateRange dateRange}}
